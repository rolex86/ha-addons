configuration:
  mqtt:
    name: MQTT
    description: MQTT broker and topic settings for discovery and state publishing.
    fields:
      host:
        name: MQTT host
        description: Hostname or IP address of the MQTT broker.
      port:
        name: MQTT port
        description: TCP port of the MQTT broker.
      username:
        name: MQTT username
        description: Optional username for MQTT authentication.
      password:
        name: MQTT password
        description: Optional password for MQTT authentication.
      discovery_prefix:
        name: Discovery prefix
        description: Home Assistant MQTT discovery prefix (typically homeassistant).
      base_topic:
        name: Base topic
        description: Base topic used for device state/attributes publishing.
      client_id:
        name: Client ID
        description: MQTT client ID used by this add-on.

  poll_interval_sec:
    name: Poll interval (s)
    description: How often (in seconds) APs are queried.

  away_after_misses:
    name: Not home after misses
    description: Number of consecutive missed cycles before publishing not_home.

  extended_mode:
    name: Extended mode
    description: Adds extended attributes (SSID/VAP/rates/idle/mode/confidence). Does not change home/not_home logic.

  confidence:
    name: Confidence scoring
    description: Configurable scoring for presence_confidence (attribute only, no effect on home/not_home).
    fields:
      enabled:
        name: Enabled
        description: Calculate presence_confidence only when both Extended mode and this switch are enabled.
      rssi_thresholds:
        name: RSSI thresholds
        description: Four ascending thresholds for RSSI bucket scoring.
      rssi_scores:
        name: RSSI scores
        description: Five bucket scores for RSSI (len = thresholds + 1).
      idle_thresholds:
        name: Idle thresholds
        description: Two ascending thresholds for idle_s bucket scoring.
      idle_scores:
        name: Idle scores
        description: Three bucket scores for idle_s (len = thresholds + 1).
      rate_thresholds:
        name: Rate thresholds
        description: Three ascending thresholds for max(tx_mbps, rx_mbps) bucket scoring.
      rate_scores:
        name: Rate scores
        description: Four bucket scores for rate (len = thresholds + 1).
      band5_bonus:
        name: 5 GHz bonus
        description: Bonus points added when band is 5.
      ssid_penalty_patterns:
        name: SSID penalty patterns
        description: Case-insensitive substrings that trigger SSID penalty (example cam/iot/guest).
      ssid_penalty:
        name: SSID penalty
        description: Penalty points when SSID matches any penalty pattern.
      clamp_min:
        name: Clamp min
        description: Minimum allowed confidence value.
      clamp_max:
        name: Clamp max
        description: Maximum allowed confidence value.

  ssh:
    name: SSH
    description: Credentials and timeouts for SSH access to UniFi APs.
    fields:
      username:
        name: SSH username
        description: SSH username for AP access.
      password:
        name: SSH password
        description: SSH password for AP access.
      port:
        name: SSH port
        description: SSH TCP port on the AP.
      connect_timeout_sec:
        name: Connect timeout (s)
        description: Maximum time to establish SSH connection.
      cmd_timeout_sec:
        name: Command timeout (s)
        description: Maximum runtime for a single remote command.
      known_hosts_strict:
        name: Strict host keys
        description: Enable strict host key validation (known_hosts).

  aps:
    name: Access points
    description: List of UniFi AP devices to poll over SSH.
    fields:
      name:
        name: AP name
        description: Logical AP name, published as ap_name attribute.
      host:
        name: AP host
        description: IP address or hostname of the AP.
      floor:
        name: Floor/Zone
        description: Optional explicit floor label. If UI does not persist it, use Floor overrides.

  floor_overrides:
    name: Floor overrides
    description: Reliable floor mapping by AP name (recommended when aps[].floor is not persisted by UI).
    fields:
      ap_name:
        name: AP name
        description: Must exactly match aps[].name.
      floor:
        name: Floor/Zone
        description: Value published as floor attribute for device_tracker.

  learn_mode:
    name: Learn mode
    description: Collect unknown (non-whitelist) devices into /data/seen_devices.json.

  learn_max_entries:
    name: Max learned entries
    description: Maximum number of unknown devices kept in learn file.

  devices:
    name: Tracked devices
    description: Device whitelist published as device_tracker entities.
    fields:
      mac:
        name: MAC address
        description: Device MAC address in aa:bb:cc:dd:ee:ff format.
      name:
        name: Device name
        description: Friendly device name used in Home Assistant.
      allow_randomized:
        name: Allow randomized MAC
        description: Allow locally-administered/randomized MAC for this tracked device.
