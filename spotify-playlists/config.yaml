name: Spotify Playlist Builder
slug: spotify-playlists
description: Generate/update Spotify playlists from recipes (no-repeat history), triggered via HA automation.
version: "0.1.13"
url: https://github.com/rolex86/ha-addons
arch:
  - aarch64
  - amd64
  - armv7
  - i386

startup: services
init: false

webui: "http://[HOST]:[PORT:7790]/"
panel_icon: mdi:view-dashboard
panel_title: "Spotify playlist generator UI"

ports:
  7790/tcp: 7790
ports_description:
  7790/tcp: "Web UI + API"

map:
  - data:rw

options:
  port: 7790
  base_url: "http://192.168.0.109:7790"
  api_token: ""
  spotify_client_id: ""
  spotify_client_secret: ""
  spotify_redirect_uri: "http://192.168.0.109:7790/api/auth/callback"
  market: "CZ"
  lastfm_api_key: ""
  tastedive_api_key: ""
  audiodb_api_key: "2"
  songkick_api_key: ""
  log_level: "info"
  genres_fetch_limit: 300 # max artist IDs fetched for genre filters per run (0 = unlimited)
  history:
    scope: "per_recipe" # per_recipe | global
    mode: "rolling_days" # rolling_days | lifetime_capped | lifetime_all
    rolling_days: 90
    lifetime_cap: 20000

schema:
  port: int(1,65535)
  base_url: str
  api_token: str
  spotify_client_id: str
  spotify_client_secret: password
  spotify_redirect_uri: str
  market: str
  lastfm_api_key: password
  tastedive_api_key: password
  audiodb_api_key: password
  songkick_api_key: password
  log_level: list(trace|debug|info|warn|error)
  genres_fetch_limit: int(0,10000)
  history:
    scope: list(per_recipe|global)
    mode: list(rolling_days|lifetime_capped|lifetime_all)
    rolling_days: int(1,3650)
    lifetime_cap: int(1000,1000000)
